@page
@model Coolbooks.Pages.Books.BookPageModel
@{

}


<div class="row">
    <div class="col-md-4 flex-wrap align-content-center">
        <img src="@Model.Book.Imagepath" class="img-fluid" />
        </div>
    <div class="col-md-8">
        <h3>@Model.Book.Title</h3>
        <h6>@Model.Book.Description</h6>
        <h6>@Model.Book.Genre.Name</h6>
        <h6>@Model.Book.Author.Firstname @Model.Book.Author.Lastname</h6>
        <h6>@String.Format($"{Model.Book.Created:yy-MM-dd}")</h6>




        <div class="d-flex">
            @*check if there is a rating, the val variable decides
                how many times the stars should be printed.
            *@

            @{
                int starCounter = 5;

                for (int i = 1; i <= Math.Abs(Convert.ToDouble(Model.TotalRatingSum)); i++)
                {
                    <i class="bi bi-star-fill" style="color:orange; font-size: 18px"></i>
                    starCounter--;
                }
                for (int i = 1; i <= starCounter; i++)
                {
                    <i class="bi bi-star-fill" style="font-size: 18px"></i>
                }
            }


@*            @if (Model.TotalRatingSum >= 1)
            {
                int val = 0;
                bool run = true;

                while (val < 5)
                {
                    if(run == true)
                    {
                        @for (int i = 1; i <= Model.TotalRatingSum; i++)
                        {
                            <i class="bi bi-star-fill" style="color:orange; font-size: 18px"></i>
                            val++;
                            run = false;

                        }
                    }
                    if (val == 5)
                        break;
                    <i class="bi bi-star-fill" style="font-size: 18px"></i>
                    val++;
                }*@
                <h5 style="margin-right:2em;">@Model.TotalRatingSumString</h5> <p>@Model.TotalRatings Ratings</p>

@*
            }
            else
            {
                <i class="bi bi-star-fill" style="font-size: 18px"></i>
                <i class="bi bi-star-fill" style="font-size: 18px"></i>
                <i class="bi bi-star-fill" style="font-size: 18px"></i>
                <i class="bi bi-star-fill" style="font-size: 18px"></i>
                <i class="bi bi-star-fill" style="font-size: 18px"></i>
                <h5>No Rating</h5>
            }*@
           


        </div>
        <br />
        <br />
        <br />
        <br />
        <h3>Reviews</h3>
        <a style="margin-bottom:3em;" class="btn btn-primary" asp-route-id="@Model.Book.BookId" asp-page="/Reviews/Write">Write a Review</a>



        @foreach (var review in Model.Reviews)
        {
            <div class="col-md-4 d-flex" style=" margin-top:3em; width:30em;">
                <h5 style="margin-right:10px;">@review.User.Userinfo.Firstname @review.User.Userinfo.Lastname</h5>
            @{
            int starCounterR = 5;

            for (int i = 1; i <= Convert.ToInt32(review.Rating); i++)
            {
                <i class="bi bi-star-fill" style="color:orange; font-size: 18px"></i>
                starCounterR--;
            }
            for (int i = 1; i <= starCounterR; i++)
            {
                <i class="bi bi-star-fill" style="font-size: 18px"></i>
            }
            <p style="font-style:italic; color:gray; margin-left:1em;">@review.Created</p>
            }
            </div>
            <h6 style="font-weight:bold;">@review.Title</h6>
            <p>@review.Text</p>
        }
    </div>
</div>



